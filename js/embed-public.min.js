var awsmEadMain=window.awsmEadMain=window.awsmEadMain||{};jQuery(function(s){s(".ead-iframe-wrapper").each(function(){var e,a,i,t=s(this),d=t.find(".ead-iframe"),n=t.parent(".ead-document").data("viewer"),r=void 0!==n&&0<n.length&&n;r!==eadPublicViewer.viewer&&(e=d.data("src"),a=d.attr("loading"),i=!1,n=d,(i=void 0!==e&&0<e.length||void 0!==a&&"lazy"===a?!0:i)||(n=s('<iframe class="ead-iframe"></iframe>')).attr({src:d.attr("src"),style:d.attr("style"),title:d.attr("title")}),r||n.css("visibility","visible"),n.on("load",function(){s(this).parents(".ead-document").find(".ead-document-loading").css("display","none")}),i||t.html(n))}),s(".ead-document[data-pdf-src]").each(function(){var e=s(this),a=e.find(".ead-iframe"),i=e.data("pdfSrc"),t=void 0!==(t=e.data("viewer"))&&0<i.length&&0<t.length&&t,d="pdfjs"in eadPublic&&0<eadPublic.pdfjs.length&&"built-in"===t;t&&("browser"===t||d)&&(PDFObject.supportsPDFs||d?(t={},t=d?{forcePDFJS:!0,PDFJS_URL:eadPublic.pdfjs}:{width:a.css("width"),height:a.css("height")},PDFObject.embed(i,e,t)):a.css("visibility","visible"))}),s(document).on("click",".ead-reload-btn",function(e){e.preventDefault();var a=s(this).parents(".ead-document"),e=a.find(".ead-iframe").attr("src");a.find(".ead-iframe").attr("src",e)})}),awsmEadMain.adobeViewer=function(e,a){var i;(a=void 0!==a?a:eadPublic.adobe_api_key)&&(i=new AdobeDC.View({clientId:a,divId:e.attr("id")}),a=e.data("pdfSrc").split("#").shift().split("?").shift().split("/").pop(),i.previewFile({content:{location:{url:e.data("pdfSrc")}},metaData:{fileName:a}}))},document.addEventListener("adobe_dc_view_sdk.ready",function(){var a=eadPublic.adobe_api_key;a&&jQuery(".ead-document .adobe-dc-view").each(function(){var e=jQuery(this);awsmEadMain.adobeViewer(e,a)})});