var awsmEadMain=window.awsmEadMain=window.awsmEadMain||{};jQuery(function(s){s(".ead-iframe-wrapper").each(function(){var e,a,i,t=s(this),d=t.find(".ead-iframe"),n=t.parent(".ead-document").data("viewer"),o=void 0!==n&&0<n.length&&n;o!==eadPublicViewer.viewer&&(e=d.data("src"),a=d.attr("loading"),i=!1,n=d,(i=void 0!==e&&0<e.length||void 0!==a&&"lazy"===a?!0:i)||(n=s('<iframe class="ead-iframe"></iframe>')).attr({src:d.attr("src"),style:d.attr("style"),title:d.attr("title")}),o||n.css("visibility","visible"),n.on("load",function(){s(this).parents(".ead-document").find(".ead-document-loading").css("display","none")}),i||t.html(n))}),s(".ead-document[data-pdf-src]").each(function(){var e=s(this),a=e.find(".ead-iframe"),i=e.data("pdfSrc"),t=void 0!==(t=e.data("viewer"))&&0<i.length&&0<t.length&&t,d="pdfjs"in eadPublic&&0<eadPublic.pdfjs.length&&"built-in"===t;t&&("browser"===t||d)&&(PDFObject.supportsPDFs||d?(t={},t=d?{forcePDFJS:!0,PDFJS_URL:eadPublic.pdfjs}:{width:a.css("width"),height:a.css("height")},PDFObject.embed(i,e,t)):a.css("visibility","visible"))}),s(document).on("click",".ead-reload-btn",function(e){e.preventDefault();var a=s(this).parents(".ead-document"),e=a.find(".ead-iframe").attr("src");a.find(".ead-iframe").attr("src",e)})}),awsmEadMain.getAdobeFileOptions=function(e){var a=e.data("pdfSrc").split("#").shift().split("?").shift().split("/").pop();return{content:{location:{url:e.data("pdfSrc")}},metaData:{fileName:a}}},awsmEadMain.getAdobeViewerOptions=function(e){return{showAnnotationTools:!1,showLeftHandPanel:!1,enableFormFilling:!1,showDownloadPDF:!1,showPrintPDF:!1,embedMode:"",showPageControls:!1,dockPageControls:!1}},awsmEadMain.adobeViewer=function(e,a){var i;(a=void 0!==a?a:eadPublic.adobe_api_key)&&(i=e.attr("id"),a=new AdobeDC.View({clientId:a,divId:i}),awsmEadMain.adobeFileOptions=awsmEadMain.adobeFileOptions||{},awsmEadMain.adobeViewerOptions=awsmEadMain.adobeViewerOptions||{},awsmEadMain.adobeFileOptions[i]=awsmEadMain.getAdobeFileOptions(e),awsmEadMain.adobeViewerOptions[i]=awsmEadMain.getAdobeViewerOptions(e),e.trigger("awsm_ead_adobe_viewer_init"),a.previewFile(awsmEadMain.adobeFileOptions[i],awsmEadMain.adobeViewerOptions[i]))},document.addEventListener("DOMContentLoaded",function(){var i=eadPublic.adobe_api_key;if(i){let a=setInterval(()=>{"undefined"!=typeof AdobeDC&&(jQuery(document).trigger("awsm_ead_adobe_sdk_loaded"),jQuery('.ead-document[data-viewer="adobe"]').each(function(){var e=jQuery(this);awsmEadMain.adobeViewer(e,i),clearInterval(a)}))},250)}});