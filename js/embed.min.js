jQuery(function(l){var e,s=window.eadEmbed=window.eadEmbed||{},d=(s.updateprovider=function(e,d){a(e,d)},s.human_filesize=function(e){var d=e;if(!(d<1024)){for(;1024<=(d/=1024););d.toFixed(1)}},s.setpseudo=function(e){e=e,l("#new-provider").hide(),l("#ead-pseudo").show(),l("#ead-downloadc").hide(),l('select[name="ead-pseudo"]').val(e)},s.ead_showmsg=function(e){m(e)},wp.template("embed-popup-template")),o=(l("#embed-popup-wrap-template").html(d),l("#embed-popup-wrap-template").html()),t="",c={},n="",i=emebeder.msextension,u="undefined"!=typeof eadPublic&&eadPublic.adobe_api_key;function a(e,d){t=e.url,v(c=e,d),f();l("#insert-doc").prop("disabled",!1),l("#ead-filename").html(e.filename),e.filesizeHumanReadable?l("#ead-filesize").html(e.filesizeHumanReadable):l("#ead-filesize").html("&nbsp;"),l(".upload-success").fadeIn(),l(".ead-container").hide(),b(d)}function p(e){return-1==e.indexOf("%")?(e=e.replace(/[^0-9]/g,""),e+="px"):(e=e.replace(/[^0-9]/g,""),e+="%"),e}function r(){var e=l("#TB_window"),d=l(window).width(),o=l(window).height(),d=1080<d?1080:d;e.size()&&(e.width(d-50).height(o-45),l("#TB_ajaxContent").css({width:"100%",height:"100%",padding:"0"}),e.css({"margin-left":"-"+parseInt((d-50)/2,10)+"px"}),void 0!==document.body.style.maxWidth&&e.css({top:"20px","margin-top":"0"}),l("#TB_title").css({"background-color":"#fff",color:"#cfcfcf"}))}function F(e,d){var o=l("#ead-"+e).val();return o&&("ead-"+e==d||o!=emebeder[e])}function m(e){l("#embed-message").fadeIn(),l("#embed-message p").text(e)}function f(e){var d,o,t,a,n,i,u,r;e=void 0!==e&&e,c?l("#embed-popup #shortcode").text((d=c,e=e,o=p(l("#ead-height").val()),t=p(l("#ead-width").val()),a=l("#ead-download").val(),n=l("#ead-provider").val(),i=l("#ead-text").val(),u=l("#ead-cache").is(":checked"),s.shortcodeAttrs={},d.url&&(s.shortcodeAttrs.url=d.url),F("height",e)&&(s.shortcodeAttrs.height=o),F("width",e)&&(s.shortcodeAttrs.width=t),F("download",e)&&(s.shortcodeAttrs.download=a),F("provider",e)&&(s.shortcodeAttrs.viewer=n),F("text",e)&&"none"!=a&&(s.shortcodeAttrs.text=i),s.file=d,"google"==n?(l("#eadcachemain").show(),u&&(s.shortcodeAttrs.cache="off")):(l("#eadcachemain").hide(),l(".ead-browser-viewer-note").hide()),l("#embed-popup").trigger("awsm_ead_generate_embed_shortcode",[s.shortcodeAttrs,s.file]),r="",l.each(s.shortcodeAttrs,function(e,d){r+=e+'="'+d+'" '}),"[embeddoc "+r.trim()+"]")):l("#embed-popup #shortcode").text("")}function b(e){l(".uploaded-doccument").removeClass("ead-link ead-upload ead-dropbox ead-drive ead-box"),l(".uploaded-doccument").addClass("ead-"+e)}function h(){tb_remove(),setTimeout(function(){l("body").removeClass("ead-popup-on")},800)}function v(e,d){var o=i.split(","),t=e.filename,a=!1,e=("link"==d&&(a=!0,t=e.url),"."+t.split(".").pop());l.each(["adobe","built-in","browser","microsoft"],function(e,d){l("#new-provider option[value='"+d+"']").attr({disabled:!1,hidden:!1})}),l(".ead-browser-viewer-note").hide(),-1!==l.inArray(d,["link","upload"])&&(-1===l.inArray(e,o)?(n="google",".pdf"==e&&u?(n="adobe","enable"==emebeder.force_adobe&&l("#new-provider option[value='google']").attr({disabled:!0})):l("#new-provider option[value='adobe']").attr({disabled:!0}),l("#new-provider option[value='"+n+"']").attr("selected","selected"),l("#new-provider option[value='microsoft']").attr({disabled:!0,hidden:!0}),l("#ead-provider").val(l("#new-provider option[value='"+n+"']").val())):(n="microsoft",l("#new-provider option[value='microsoft']").attr("selected","selected"),l("#ead-provider").val(l("#new-provider option[value='microsoft']").val())),".pdf"!=e&&(l("#new-provider option[value='browser']").attr({disabled:!0,hidden:!0}),l("#new-provider option[value='adobe']").attr({disabled:!0,hidden:!0})),(".pdf"!=e||"link"===d&&-1===t.indexOf(emebeder.site_url))&&l("#new-provider option[value='built-in']").attr({disabled:!0,hidden:!0}),a&&l("#new-provider").trigger("awsm_ead_check_item",[t]))}function w(){"none"==l("#ead-download").val()?l("#ead-download-text").hide():l("#ead-download-text").show()}l(document).on("click",".awsm-embed",function(e){0===l("#embed-popup").length&&l("body").append(o),e.preventDefault(),l(".ead-container").show(),l("#awsm-url").val(""),l(".ead-options").fadeIn(),l(".addurl-box").hide(),l(".upload-success").hide(),l("#embed-message").hide(),l("#insert-doc").prop("disabled",!0),l("#new-provider").show(),l("#ead-pseudo").hide(),l('select[name="ead-pseudo"]').val(""),n="",l("#new-provider  option[value='microsoft']").attr("disabled",!1),l("#ead-downloadc").show(),w(),l("body").addClass("ead-popup-on"),tb_show("Embed Any Document","#TB_inline?inlineId=embed-popup-wrap&amp;width=1030&amp;modal=true",null),r(),l("#upload-doc").focus()}),l(document).on("click","#add-more",function(){var e=emebeder.admin_url+"/options-general.php?page=ead-settings-addons";window.open(e,"_blank")}),l(document).on("change",".ead-usc",function(){n="",f(l(this).attr("id")),w()}),l(".embedval").keyup(function(){f(l(this).attr("id"))}),l(document).on("click","#upload-doc",function(){e||(e=wp.media({title:"Embed Any Document",multiple:!1,library:{type:emebeder.validtypes},button:{text:emebeder.select_button}})).on("select",function(){a(e.state().get("selection").first().toJSON(),"upload")}),e.open()}),l(document).on("click","#ead-add-url",function(){var e=l("#awsm-url").val();""!==e?function(e){l("#embed-message").hide(),/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)?(e=(e=(t=e).split("/").pop())||emebeder.from_url,c={url:t,filename:e},l("#insert-doc").prop("disabled",!1),l("#ead-filename").html(emebeder.from_url),l("#ead-filesize").html("&nbsp;"),l(".upload-success").fadeIn(),l(".ead-container").hide(),b("link"),v(c,"link"),f()):m(emebeder.invalidurl)}(e):(l("#awsm-url").addClass("urlerror"),f())}),l(document).on("click","#insert-doc",function(){{var e;c?(e=!0,(e=void 0!==wp.blocks&&void 0!==wp.blocks.getBlockType("embed-any-document/document")?!1:e)&&wp.media.editor.insert(l("#embed-popup #shortcode").text()),h()):m(emebeder.nocontent)}}),l(document).on("click","#add-ead-document",function(e){e.preventDefault(),l(".addurl-box").fadeIn(),l(".ead-options").hide()}),l(document).on("click",".go-back",function(e){e.preventDefault(),l(".addurl-box").hide(),l(".ead-options").fadeIn()}),l(document).on("click","#embed-popup .cancel-embed,.ead-close",function(e){e.preventDefault(),h()}),l(window).resize(function(){r()})});