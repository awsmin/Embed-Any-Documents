jQuery(document).ready(function(p){var a,d=p("#awsm-url"),m=p("#shortcode"),t=p("#embed-message p"),u=(p(".mceActionPanel"),p(".ead-container")),f="",n=emebeder.msextension;emebeder.drextension;function b(e){return-1==e.indexOf("%")?(e=e.replace(/[^0-9]/g,""),e+="px"):(e=e.replace(/[^0-9]/g,""),e+="%"),e}function o(){var e=p("#TB_window"),d=p(window).width(),o=p(window).height(),a=1080<d?1080:d;e.size()&&(e.width(a-50).height(o-45),p("#TB_ajaxContent").css({width:"100%",height:"100%",padding:"0"}),e.css({"margin-left":"-"+parseInt((a-50)/2,10)+"px"}),void 0!==document.body.style.maxWidth&&e.css({top:"20px","margin-top":"0"}),p("#TB_title").css({"background-color":"#fff",color:"#cfcfcf"}))}function v(e,d){var o=p("#ead-"+e).val();return o&&("ead-"+e==d||o!=emebeder[e])}function i(e){var d,o,a,t,u,n,i,F,l,r,s,c;e=void 0!==e&&e,f?m.text((d=f,o=e,a=b(p("#ead-height").val()),t=b(p("#ead-width").val()),u=p("#ead-download").val(),n=p("#ead-provider").val(),i=p("#ead-text").val(),c=s=r=l=F="",v("height",o)&&(F=' height="'+a+'"'),v("width",o)&&(l=' width="'+t+'"'),v("download",o)&&(r=' download="'+u+'"'),v("provider",o)&&(s=' viewer="'+n+'"'),v("text",o)&&"none"!=u&&(c=' text="'+i+'"'),'[embeddoc url="'+d+'"'+l+F+r+s+c+"]")):m.text("")}function F(e){p(".uploaded-doccument").removeClass("ead-link ead-upload ead-dropbox ead-drive ead-box"),p(".uploaded-doccument").addClass("ead-"+e)}function l(){tb_remove(),setTimeout(function(){p("body").removeClass("ead-popup-on")},800)}function r(e,d){var o=n.split(","),a=e.filename;"link"==d&&(a=e.url);var t="."+a.split(".").pop();p("#new-provider  option[value='microsoft']").attr("disabled",!1),-1!=p.inArray(d,["link","upload"])&&(-1==p.inArray(t,o)?(p("#new-provider option[value='google']").attr("selected","selected"),p("#new-provider  option[value='microsoft']").attr("disabled",!0)):p("#new-provider option[value='microsoft']").attr("selected","selected"))}function s(){"none"==p("#ead-download").val()?p("#ead-download-text").hide():p("#ead-download-text").show()}p("body").on("click",".awsm-embed",function(e){u.show(),d.val(""),p(".ead-options").fadeIn(),p(".addurl-box").hide(),p(".upload-success").hide(),p("#embed-message").hide(),p("#insert-doc").attr("disabled","disabled"),p("#new-provider").show(),p("#ead-pseudo").hide(),p("#new-provider  option[value='microsoft']").attr("disabled",!1),p("#ead-downloadc").show(),s(),e.preventDefault(),p("body").addClass("ead-popup-on"),tb_show("Embed Any Document","#TB_inline?inlineId=embed-popup-wrap&amp;width=1030&amp;modal=true",null),o(),p("#upload-doc").focus()}),p(".ead-usc").change(function(){i(p(this).attr("id")),s()}),p(".embedval").keyup(function(){i(p(this).attr("id"))}),p("#upload-doc").click(function(){if(a)return void a.open();(a=wp.media({title:"Embed Any Document",multiple:!1,library:{type:emebeder.validtypes},button:{text:emebeder.select_button}})).on("select",function(){var e,d,o=a.state().get("selection").first().toJSON();d="upload",f=(e=o).url,r(e,d),i(),function(e,d){p("#insert-doc").removeAttr("disabled"),p("#ead-filename").html(e.filename),e.filesizeHumanReadable?p("#ead-filesize").html(e.filesizeHumanReadable):p("#ead-filesize").html("&nbsp;");p(".upload-success").fadeIn(),u.hide(),F(d)}(e,d)}),a.open()}),p("#ead-add-url").click(function(){var e=d.val();""!==e?function(e){{var d,o;p("#embed-message").hide(),function(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}(e)?(d=(d=(f=e).split("/").pop())||emebeder.from_url,o={url:f,filename:d},p("#insert-doc").removeAttr("disabled"),p("#ead-filename").html(emebeder.from_url),p("#ead-filesize").html("&nbsp;"),p(".upload-success").fadeIn(),u.hide(),F("link"),r(o,"link"),i()):function(e){p("#embed-message").fadeIn(),t.text(e)}(emebeder.invalidurl)}}(e):(d.addClass("urlerror"),updateshortcode())}),p("#insert-doc").click(function(){{var e;f?(e=!0,void 0!==wp.blocks&&void 0!==wp.blocks.getBlockType("embed-any-document/document")&&(e=!1),e&&wp.media.editor.insert(m.text()),l()):showmsg(emebeder.nocontent)}}),p("#add-ead-document").on("click",function(e){e.preventDefault(),p(".addurl-box").fadeIn(),p(".ead-options").hide()}),p(".go-back").on("click",function(e){e.preventDefault(),p(".addurl-box").hide(),p(".ead-options").fadeIn()}),p("#embed-popup").on("click",".cancel-embed,.ead-close",function(e){e.preventDefault(),l()}),p(window).resize(function(){o()})});